@using MMM.ViewModels.TransactionViewModel
@model MMM.ViewModels.BankAccountViewModel.BankAccountDetailsViewModel

@{
    ViewBag.Title = "Details and Transactions";
}
@*<link href="~/Content/jquery-ui-timepicker-addon.min.css" rel="stylesheet" />
<script src="~/Scripts/jquery-ui-timepicker-addon.min.js"></script>
<link href="~/Content/themes/base/jquery-ui.min.css" rel="stylesheet" />
<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<script src="~/Scripts/jquery-ui-1.12.1.min.js"></script>*@
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript">
    //$(document).ready(function () {
    //    ModalClick();
    //});

    //function ModalClick() {
    //    $('#CreateTransaction').click(function () {

    //    });
    //}
</script>

<h2>Konto</h2>

<div>
    <hr />
    <dl class="dl-horizontal h4">
        <dt>
            @Html.DisplayNameFor(model => model.Name)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Name)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Balance)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Balance)
        </dd>

        <dt>
            @Html.DisplayNameFor(model => model.Currency)
        </dt>

        <dd>
            @Html.DisplayFor(model => model.Currency)
        </dd>
    </dl>
</div>
<div>
    <a href="@Url.Action("Index")" class="btn btn-primary">
        <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>
        Wróć do listy
    </a>
    <a href="@Url.Action("Edit", new {id = Model.Id})" class="btn btn-warning">
        <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span>
        Edytuj
    </a>
    <a href="@Url.Action("Delete", new {id = Model.Id})" class="btn btn-danger">
        <span class="glyphicon glyphicon-remove"></span>
        Usuń
    </a>
</div>
<hr/>
<h2>Transakcje</h2>
<hr />
<div>
    <button type="button" id="CreateTransaction" class="btn btn-success" data-toggle="modal" data-target="#CreateModal"><span class="glyphicon glyphicon-plus"></span> Dodaj</button>
</div>
<hr />
<div class="modal fade" id="CreateModal" role="dialog">
    <div class="modal-dialog">
        @{ Html.RenderAction("Create", "Transaction", new { bankAccountId = Model.Id, userId = Model.User.Id });}
    </div>
</div>
<div class="row">
    @foreach (var transaction in Model.Transactions)
    {
        <a href="@Url.Action("Details", "Transaction", new { id = transaction.Id})">
            <div class="col-xs-6 col-sm-4 col-md-3">
                @Html.Partial("~/Views/Transaction/Transaction.cshtml", transaction)
            </div>
        </a>
    }
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
}

